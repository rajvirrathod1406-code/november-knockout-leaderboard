<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>November Knockout Leaderboard</title>
<style>
  :root{
    --gold:#e4b229; --deep:#0a2142; --mid:#0e3769; --ink:#0b1b32;
    --card:rgba(255,255,255,.06); --stroke:rgba(255,255,255,.18);
  }

  html, body{
    height:100%; margin:0;
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:#fff;
    background:
      repeating-linear-gradient(-45deg, rgba(255,255,255,.05) 0px, rgba(255,255,255,.05) 2px, transparent 2px, transparent 12px),
      linear-gradient(180deg, var(--mid) 0%, var(--deep) 100%);
    background-attachment:fixed, fixed;
  }

  .wrap{max-width:1200px;margin:0 auto; padding:28px}
  .title{font-size:40px;font-weight:900;letter-spacing:.06em;text-transform:uppercase;color:var(--gold);text-align:center;margin:0 0 18px}

  /* Results grid */
  .grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap:22px; align-items:start }
  .box{ background:var(--card); border:1px solid var(--stroke); border-radius:16px; padding:0; backdrop-filter:saturate(120%) blur(4px) }
  .box header{ padding:12px 16px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,.12); background:#0e325e; border-top-left-radius:16px; border-top-right-radius:16px }
  .date{font-weight:900;font-size:18px}
  .summary{color:#e7edf7;font-size:12px;opacity:.9}

  table{width:100%;border-collapse:separate;border-spacing:0;background:#fff;border-radius:0 0 16px 16px;overflow:hidden}
  tbody td{padding:14px 16px;vertical-align:middle;border-top:1px solid #eef2f7}
  tbody tr:first-child td{border-top:none}
  tbody tr:nth-child(even){background:#f8fbff}
  .team{display:flex;align-items:center;gap:10px;font-weight:800;font-size:18px;color:var(--ink)}
  .team img{width:36px;height:36px;object-fit:contain;border-radius:8px;background:#f6f8fb;padding:4px;box-shadow:inset 0 0 0 2px #fff, 0 0 0 1px #e7edf5}
  .pct{font-weight:900;text-align:right;color:var(--ink);white-space:nowrap}
  .after-divider td{border-top:4px solid var(--gold)!important}

  .footer-note{color:#d4d8e0;font-size:14px;opacity:.9;text-align:center;margin:18px auto 0;max-width:800px}

  @media (max-width:640px){
    .wrap{padding:16px}
    .title{font-size:28px}
    .grid{grid-template-columns:1fr}
    .team{font-size:16px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="title">November Knockout Leaderboard</div>
    <div id="grid" class="grid"></div>
    <div class="footer-note">
      Note: The figures are sourced from the coordinator's MIS; final results will be reconciled.
    </div>
  </div>

<script>
/* Logos (CDN links you shared) */
const LOGO={
  'Capital Chargers':'https://i.postimg.cc/d0mhp9Lt/Capital-Chargers-Logo-with-Mosque-Emblem-1.png',
  'Desert Warriors':'https://i.postimg.cc/rzXcqvPG/Desert-Warriors.png',
  'ENBD Eagles':'https://i.postimg.cc/gJxnjbgL/ENBD-Eagles-Logo-Design.png',
  'TwinForce':'https://i.postimg.cc/2ST6xStP/Twin-Force.png'
};

/* Your daily numbers (only these dates will appear) */
const data = {
  3:  { 'Capital Chargers': 2.3, 'Desert Warriors': 0.7, 'ENBD Eagles': 1.5, 'TwinForce': 4.9 },
  4:  { 'Capital Chargers': 3.2, 'Desert Warriors': 4.1, 'ENBD Eagles': 4.4, 'TwinForce': 7.2 },
  5:  { 'Capital Chargers': 7.7, 'Desert Warriors': 7.5, 'ENBD Eagles': 4.7, 'TwinForce': 10.5 }
};

const fmt = n => (Math.round(n*10)/10).toFixed(1) + '%';

/* Helpers */
function sortEntries(obj){
  return Object.entries(obj||{}).map(([team,percent])=>({team,percent:+percent||0}))
    .sort((a,b)=> b.percent - a.percent || a.team.localeCompare(b.team));
}
function dividerAfterIndex(sorted){
  if(!sorted.length) return 0;
  const cut = Math.min(1, sorted.length-1);
  const val = sorted[cut]?.percent ?? null;
  let idx = cut; for(let i=cut+1;i<sorted.length;i++){ if(sorted[i].percent===val) idx=i; else break; }
  return idx + 1;
}

/* Render only the results, newest date first (5,4,3) */
(function renderCards(){
  const grid = document.getElementById('grid');

  const daysDesc = Object.keys(data).map(Number).sort((a,b)=>b-a); // 5,4,3
  daysDesc.forEach(d=>{
    const rows = sortEntries(data[d]);
    const cutAt = dividerAfterIndex(rows);
    const top = rows[0] || {team:'', percent:0};

    const html = `
      <div class="box">
        <header>
          <div class="date">Nov ${d}</div>
          <div class="summary">${top.team ? `${top.team}: ${fmt(top.percent)}` : '&nbsp;'}</div>
        </header>
        <table aria-label="Leaderboard for Nov ${d}">
          <tbody>
            ${rows.map((r,i)=>`
              <tr ${i===cutAt && i<rows.length ? 'class="after-divider"' : ''}>
                <td>
                  <div class="team">
                    <img src="${LOGO[r.team]}" alt="${r.team} logo">
                    ${r.team}
                  </div>
                </td>
                <td class="pct">${fmt(r.percent)}</td>
              </tr>`).join('')}
          </tbody>
        </table>
      </div>`;
    grid.insertAdjacentHTML('beforeend', html);
  });
})();
</script>
</body>
</html>
